var x=Object.defineProperty,I=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var g=(r,t,e)=>t in r?x(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,c=(r,t)=>{for(var e in t||(t={}))q.call(t,e)&&g(r,e,t[e]);if(E)for(var e of E(t))C.call(t,e)&&g(r,e,t[e]);return r},b=(r,t)=>I(r,h(t));import{F as d,r as w,R as a,G as P,m as R,I as m,B as N,o as u}from"./antd.6184fff2.js";import{a as k}from"./index.7faa062c.js";import{a as M}from"./index.e4fa613d.js";import{a as B}from"./index.29ab49bc.js";import"./request.afec6a83.js";const o=d.Item,v={labelCol:{span:4},wrapperCol:{span:12}},S={wrapperCol:{span:8,offset:4}},_=({location:r,history:t,intl:e})=>{const{editData:i}=r.state||{},l=i!==void 0,[f]=d.useForm(),[y,F]=w.exports.useState([]);w.exports.useEffect(()=>{(async()=>{let s=await B.getOptions();if(s.code)return u.error(s.msg);F(s.data)})(),l&&f.setFieldsValue(i)},[]);const j=async n=>{let s=l?await M.edit(i._id,n):await M.add(n);if(s.code)return u.error(s.msg);u.success(s.msg),t.goBack()};return a.createElement(P,{className:"gx-card",title:e.formatMessage({id:"admin.form"},{control:l?"Edit":"Create"})},a.createElement(d,b(c({},v),{form:f,name:"admin",onFinish:j,autoComplete:"off"}),a.createElement(o,{label:e.formatMessage({id:"admin.roleName"}),name:"roleId",rules:[{required:!0}]},a.createElement(R,{placeholder:e.formatMessage({id:"placeholder.selector"}),options:y})),a.createElement(o,{label:e.formatMessage({id:"admin.account"}),name:"account",rules:[{required:!0}]},a.createElement(m,null)),l?a.createElement(o,{label:e.formatMessage({id:"admin.password"}),name:"password"},a.createElement(m,null)):a.createElement(a.Fragment,null,a.createElement(o,{label:e.formatMessage({id:"admin.password"}),name:"password",rules:[{required:!0}],hasFeedback:!0},a.createElement(m.Password,null)),a.createElement(d.Item,{name:"confirm",label:e.formatMessage({id:"admin.confirmPassword"}),dependencies:["password"],hasFeedback:!0,rules:[{required:!0},({getFieldValue:n})=>({validator(s,p){return!p||n("password")===p?Promise.resolve():Promise.reject(new Error(e.formatMessage({id:"admin.confirmError"})))}})]},a.createElement(m.Password,null))),a.createElement(o,{label:e.formatMessage({id:"admin.name"}),name:"name",rules:[{required:!0}]},a.createElement(m,null)),a.createElement(o,{label:e.formatMessage({id:"admin.email"}),name:"email"},a.createElement(m,null)),a.createElement(o,{label:e.formatMessage({id:"admin.staffNo"}),name:"staffNo"},a.createElement(m,null)),a.createElement(o,c({},S),a.createElement(N,{type:"primary",htmlType:"submit"},e.formatMessage({id:"buttons.submit"})))))};var V=k(_);export{V as default};
//# sourceMappingURL=modify.87d28da7.js.map
