var j=Object.defineProperty,S=Object.defineProperties;var g=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var u=(a,t,i)=>t in a?j(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i,o=(a,t)=>{for(var i in t||(t={}))D.call(t,i)&&u(a,i,t[i]);if(p)for(var i of p(t))P.call(t,i)&&u(a,i,t[i]);return a},f=(a,t)=>S(a,g(t));import{r as y,R as e,m as v,G as h,H as k}from"./antd.6184fff2.js";import{e as C,I as s}from"./index.7faa062c.js";import{a as E}from"./dayjs.min.39f03de2.js";import{a as V}from"./index.162d3e1b.js";import{a as A}from"./index.e4fa613d.js";import{u as M}from"./useListPage.fe4e257c.js";import{b as x,a as O}from"./tableHelp.374439ae.js";import{u as d}from"./useSearchColumn.80e4a35f.js";import{M as w,D as B,A as H}from"./operateBtns.7f848e8e.js";import"./request.afec6a83.js";import"./styled-components.browser.esm.a560c53e.js";const Y={2:"Waiting",5:"In"},F=a=>({selectedKeys:t,setSelectedKeys:i,confirm:m})=>e.createElement(v,{options:a,style:{width:"100%"},value:t,onSelect:n=>{i([n]),m()},placeholder:"Click to select"}),R=()=>({selectedKeys:a,setSelectedKeys:t,confirm:i})=>e.createElement(v,{options:[{label:"Waiting",value:"2"},{label:"In",value:"5"}],style:{width:"100%"},value:a,onSelect:m=>{t([m]),i()},placeholder:"Click to select"}),Z=()=>{var c;const{user:a}=C(r=>r.admin),{dataState:t,handleTableChange:i,deleOne:m,cachedParams:n}=M(V),[N,I]=y.exports.useState([]);y.exports.useEffect(()=>{A.getOptions().then(r=>I(r))},[]);const b=[{title:e.createElement(s,{id:"table.operation"}),dataIndex:"sort",key:"operation",render:(r,l)=>e.createElement("div",{style:{display:"flex"}},e.createElement(w,{carry:{editData:l}}),e.createElement(B,{onConfirm:m(l._id)}))},o({title:e.createElement(s,{id:"visitor.companyName"}),dataIndex:"companyName",key:"~companyName",filteredValue:n["~companyName"]},d("companyName")),a?a.roleName==="System Admin"||a.roleName.includes("Fleet")?o({title:e.createElement(s,{id:"visitor.applicant"}),dataIndex:"applicant",key:"applicantId",filteredValue:n.applicantId},x(F(N))):{}:{},o({title:e.createElement(s,{id:"visitor.fullName"}),dataIndex:"fullName",key:"~fullName",filteredValue:n["~fullName"]},d("fullName")),o({title:e.createElement(s,{id:"visitor.contactPerson"}),dataIndex:"contactPerson",key:"~contactPerson",filteredValue:n["~contactPerson"]},d("contactPerson")),{title:e.createElement(s,{id:"visitor.contactingDepartment"}),dataIndex:"deptName",key:"~deptName"},o({title:e.createElement(s,{id:"visitor.status"}),dataIndex:"permit",key:"status",render:r=>Y[r.status],filteredValue:n.status},x(R())),o({title:e.createElement(s,{id:"visitor.visitDate"}),dataIndex:"visitDate",key:"#visitDate",sorter:!0,sortOrder:(c=n.sort)==null?void 0:c.visitDate,render:r=>E(r).format("YYYY-MM-DD"),filteredValue:n["#visitDate"]},O()),{title:e.createElement(s,{id:"visitor.timeEst"}),dataIndex:"timeEst",key:"#visitDate",render:r=>r.map(l=>E(l).format("HH:mm")).join(" - ")},{title:e.createElement(s,{id:"visitor.carPlateNos"}),dataIndex:"carPlateNos",render:r=>r.map(l=>l.licenceNumber).join(", ")},{title:e.createElement(s,{id:"visitor.email"}),dataIndex:"carPlateNos",render:r=>r.map(l=>l.email).join(", ")}];return e.createElement(h,{title:e.createElement(s,{id:"table.list",values:{menu:"Visitor"}})},e.createElement(H,null),e.createElement(k,f(o({},t),{className:"gx-table-responsive",columns:b,rowKey:"_id",onChange:i})))};export{Z as default};
//# sourceMappingURL=index.32c9de0b.js.map
