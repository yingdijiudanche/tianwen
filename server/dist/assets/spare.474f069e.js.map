{"version":3,"file":"spare.474f069e.js","sources":["../../src/api/spare/index.js","../../src/routes/booking/spare.jsx"],"sourcesContent":["import req from \"../../util/request\";\r\n\r\nexport default {\r\n  getAll: () => req.get(`spare/all`),\r\n  add: (data) => req.post(\"spare\", data),\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Card, Radio, Form, Button, message } from 'antd';\r\nimport styled from \"styled-components\"\r\nimport { injectIntl } from \"react-intl\";\r\n\r\nimport api from '../../api/spare'\r\n\r\nconst Item = Form.Item;\r\n\r\nconst Expand = styled.div`\r\n    flex:1;\r\n    margin: 24px;\r\n    &>div+div{\r\n        margin-top:15px;\r\n    }\r\n`\r\nconst layout = {\r\n  labelCol: { span: 4 },\r\n  wrapperCol: { span: 12 },\r\n};\r\nconst tailLayout = {\r\n  wrapperCol: { span: 8, offset: 1 },\r\n};\r\n\r\nconst Spare = ({ location, history, intl }) => {\r\n  const { permitId } = location.state;\r\n  const [plainOptions, setPlainOptions] = useState([]);\r\n  const [ln, setLN] = useState();\r\n  useEffect(() => {\r\n    api.getAll().then(res => {\r\n      setPlainOptions(res.map(m => {\r\n        return { label: m.licenceNumber, value: `${m.licenceNumber},${m._id}`, disabled: m.spareUsed };\r\n      }))\r\n    })\r\n  }, [])\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const onChange = e => {\r\n    setLN(e.target.value);\r\n  }\r\n\r\n  const onFinish = async () => {\r\n    let res = await api.add({\r\n      permitId,\r\n      licenceNumber: ln.split(',')[0],\r\n      vehicleId: ln.split(',')[1]\r\n    })\r\n    if (res.code) return message.error(res.msg);\r\n    message.success('Successfully');\r\n    history.goBack()\r\n  }\r\n  return (\r\n    <Card className=\"gx-card\" title={intl.formatMessage({ id: 'booking.sqareCard' })}>\r\n      <Form {...layout} form={form} name='spare' onFinish={onFinish}>\r\n        <Expand>\r\n          <Radio.Group options={plainOptions} onChange={onChange} value={ln} />\r\n        </Expand>\r\n        <Item {...tailLayout}>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            {intl.formatMessage({ id: 'buttons.submit' })}\r\n          </Button>\r\n        </Item>\r\n      </Form>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default injectIntl(Spare);"],"names":["getAll","req","get","add","data","post","Item","Form","Expand","styled","div","layout","labelCol","span","wrapperCol","tailLayout","offset","Spare","location","history","intl","permitId","state","plainOptions","setPlainOptions","useState","ln","setLN","then","res","map","m","label","licenceNumber","value","_id","disabled","spareUsed","form","useForm","onChange","e","target","onFinish","api","split","vehicleId","code","message","error","msg","success","goBack","formatMessage","id","injectIntl"],"mappings":"2oBAEA,MAAe,CACbA,OAAQ,IAAMC,EAAIC,IAAK,aACvBC,IAAMC,GAASH,EAAII,KAAK,QAASD,ICGnC,KAAME,GAAOC,EAAKD,KAEZE,EAASC,EAAOC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAOhBC,EAAS,CACbC,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,KAEhBE,EAAa,CACjBD,WAAY,CAAED,KAAM,EAAGG,OAAQ,IAG3BC,EAAQ,CAAC,CAAEC,WAAUC,UAASC,UAAW,MACvC,CAAEC,YAAaH,EAASI,MACxB,CAACC,EAAcC,GAAmBC,mBAAS,IAC3C,CAACC,EAAIC,GAASF,yCACV,IAAM,GACVzB,SAAS4B,KAAKC,GAAO,GACPA,EAAIC,IAAIC,GACf,EAAEC,MAAOD,EAAEE,cAAeC,MAAQ,GAAEH,EAAEE,iBAAiBF,EAAEI,MAAOC,SAAUL,EAAEM,iBAGtF,SAEG,CAACC,GAAQ/B,EAAKgC,UAEdC,EAAWC,GAAK,GACdA,EAAEC,OAAOR,QAGXS,EAAW,SAAY,IACvBd,GAAM,KAAMe,GAAIzC,IAAI,CACtBkB,WACAY,cAAeP,EAAGmB,MAAM,KAAK,GAC7BC,UAAWpB,EAAGmB,MAAM,KAAK,QAEvBhB,EAAIkB,WAAaC,GAAQC,MAAMpB,EAAIqB,OAC/BC,QAAQ,kBACRC,iCAGP,EAAD,CAAM,UAAU,UAAU,MAAOhC,EAAKiC,cAAc,CAAEC,GAAI,uCACvD,EAAD,OAAU3C,GAAV,CAAkB,OAAY,KAAK,QAAQ,6BACxC,EAAD,qBACG,EAAM,MAAP,CAAa,QAASY,EAAc,WAAoB,MAAOG,qBAEhE,EAAD,KAAUX,mBACP,EAAD,CAAQ,KAAK,UAAU,SAAS,UAC7BK,EAAKiC,cAAc,CAAEC,GAAI,wBAQtC,MAAeC,EAAWtC"}