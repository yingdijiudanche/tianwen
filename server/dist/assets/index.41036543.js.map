{"version":3,"file":"index.41036543.js","sources":["../../src/routes/admin/index.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { Table, Tag, Select, Card, Divider, } from 'antd';\r\n\r\nimport api from '../../api/admin';\r\nimport roleApi from '../../api/role';\r\nimport useListPage from '../../hook/useListPage';\r\nimport useSearchColumn from '../../hook/useSearchColumn';\r\nimport { buildFilter } from '../../components/Table/tableHelp';\r\nimport { AddBtn, DangerBtn, ModifyBtn } from '../../components/styled/operateBtns';\r\nimport IntlMessages from \"../../util/IntlMessages\";\r\n\r\n/**@return {import('../../../components/tableHelp').buildDrodown} */\r\nconst buildRoleSelect =\r\n  defo =>\r\n    ({ selectedKeys, setSelectedKeys, confirm }) => {\r\n      return (\r\n        <Select\r\n          options={defo}\r\n          style={{ width: '100%' }}\r\n          value={selectedKeys}\r\n          onSelect={v => {\r\n            setSelectedKeys([v]);\r\n            confirm();\r\n          }}\r\n          placeholder='Click to select'\r\n        />\r\n      );\r\n    };\r\n\r\nconst Admin = () => {\r\n  const { dataState, handleTableChange, deleOne, cachedParams } = useListPage(api);\r\n  const [roleOptions, setRoleOptions] = useState([]);\r\n  useEffect(() => {\r\n    roleApi.getOptions().then(res => {\r\n      setRoleOptions(res.data);\r\n    });\r\n  }, [])\r\n\r\n  /**@type {import('antd/lib/table').ColumnsType} */\r\n  const columns = [\r\n    {\r\n      title: <IntlMessages id='table.operation' />,\r\n      dataIndex: 'sort',\r\n      key: 'operation',\r\n      render: (_, data) => {\r\n        return (\r\n          <div style={{ display: 'flex' }}>\r\n            <ModifyBtn carry={{ editData: data }} />\r\n            <DangerBtn onConfirm={deleOne(data._id)} />\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: <IntlMessages id='admin.account' />,\r\n      dataIndex: 'account',\r\n      key: '~account',\r\n      filteredValue: cachedParams['~account'],\r\n      ...useSearchColumn('Account'),\r\n    },\r\n    {\r\n      title: <IntlMessages id='admin.name' />,\r\n      dataIndex: 'name',\r\n      key: '~name',\r\n      filteredValue: cachedParams['~name'],\r\n      ...useSearchColumn('User Name'),\r\n    },\r\n    {\r\n      title: <IntlMessages id='admin.email' />,\r\n      dataIndex: 'email',\r\n      key: '~email',\r\n      filteredValue: cachedParams['~email'],\r\n      ...useSearchColumn('Email'),\r\n    },\r\n    {\r\n      title: <IntlMessages id='admin.roleName' />,\r\n      dataIndex: 'roleName',\r\n      key: 'roleId',\r\n      render: v => <Tag>{v}</Tag>,\r\n      filteredValue: cachedParams.roleId,\r\n      ...buildFilter(buildRoleSelect(roleOptions)),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Card title={<IntlMessages id='table.list' values={{ menu: 'Account' }} />}>\r\n      <AddBtn />\r\n      <Table\r\n        {...dataState}\r\n        className=\"gx-table-responsive\"\r\n        columns={columns}\r\n        rowKey='_id'\r\n        onChange={handleTableChange}\r\n      />\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default Admin;"],"names":["buildRoleSelect","defo","selectedKeys","setSelectedKeys","confirm","width","v","Admin","dataState","handleTableChange","deleOne","cachedParams","useListPage","api","roleOptions","setRoleOptions","useState","getOptions","then","res","data","columns","title","dataIndex","key","render","_","display","editData","_id","filteredValue","useSearchColumn","roleId","buildFilter","menu"],"mappings":"y6BAYA,KAAMA,GACJC,GACE,CAAC,CAAEC,eAAcC,kBAAiBC,6BAE7B,EAAD,CACE,QAASH,EACT,MAAO,CAAEI,MAAO,QAChB,MAAOH,EACP,SAAUI,GAAK,GACG,CAACA,SAGnB,YAAY,oBAKhBC,EAAQ,IAAM,MACZ,CAAEC,YAAWC,oBAAmBC,UAASC,gBAAiBC,EAAYC,GACtE,CAACC,EAAaC,GAAkBC,mBAAS,wBACrC,IAAM,GACNC,aAAaC,KAAKC,GAAO,GAChBA,EAAIC,SAEpB,SAGGC,GAAU,CACd,CACEC,sBAAQ,EAAD,CAAc,GAAG,oBACxBC,UAAW,OACXC,IAAK,YACLC,OAAQ,CAACC,EAAGN,oBAEP,MAAD,CAAK,MAAO,CAAEO,QAAS,yBACpB,EAAD,CAAW,MAAO,CAAEC,SAAUR,qBAC7B,EAAD,CAAW,UAAWV,EAAQU,EAAKS,SAK3C,GACEP,sBAAQ,EAAD,CAAc,GAAG,kBACxBC,UAAW,UACXC,IAAK,WACLM,cAAenB,EAAa,aACzBoB,EAAgB,YAErB,GACET,sBAAQ,EAAD,CAAc,GAAG,eACxBC,UAAW,OACXC,IAAK,QACLM,cAAenB,EAAa,UACzBoB,EAAgB,cAErB,GACET,sBAAQ,EAAD,CAAc,GAAG,gBACxBC,UAAW,QACXC,IAAK,SACLM,cAAenB,EAAa,WACzBoB,EAAgB,UAErB,GACET,sBAAQ,EAAD,CAAc,GAAG,mBACxBC,UAAW,WACXC,IAAK,SACLC,OAAQnB,mBAAM,EAAD,KAAMA,GACnBwB,cAAenB,EAAaqB,QACzBC,EAAYjC,EAAgBc,6BAKhC,EAAD,CAAM,sBAAQ,EAAD,CAAc,GAAG,aAAa,OAAQ,CAAEoB,KAAM,8BACxD,EAAD,sBACC,EAAD,OACM1B,GADN,CAEE,UAAU,sBACV,UACA,OAAO,MACP,SAAUC"}