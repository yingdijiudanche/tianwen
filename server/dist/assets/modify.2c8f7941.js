var I=Object.defineProperty,O=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var M=(r,a,t)=>a in r?I(r,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[a]=t,p=(r,a)=>{for(var t in a||(a={}))F.call(a,t)&&M(r,t,a[t]);if(b)for(var t of b(a))R.call(a,t)&&M(r,t,a[t]);return r},g=(r,a)=>O(r,B(a));import{F as d,r as D,R as e,G as C,I as l,m as K,aw as L,aA as T,ay as Y,au as N,av as c,B as y,N as A,o as q}from"./antd.6184fff2.js";import{a as S}from"./index.7faa062c.js";import{a as P}from"./dayjs.min.39f03de2.js";import{a as j}from"./index.162d3e1b.js";import{r as k}from"./request.afec6a83.js";import{M as V}from"./MinusCircleOutlined.ff3ec7ec.js";var G={getList:(r,a)=>k.get("contractingBusinessDept/list",{params:r,cancelToken:a}),getOptions:r=>k.get("contractingBusinessDept/options",{params:r})};const s=d.Item,_={labelCol:{span:4},wrapperCol:{span:12}},z={wrapperCol:{span:8,offset:4}},H={marginRight:"4%"},w={span:10},h={span:24},J=({location:r,history:a,intl:t})=>{const{editData:i}=r.state||{},[n,E]=D.exports.useState([]),f=i!==void 0,[v]=d.useForm();D.exports.useEffect(()=>{if(f){const m=g(p({},i),{visitDate:P(i.visitDate),timeEst:i.timeEst.map(P)});v.setFieldsValue(m)}G.getOptions().then(m=>E(m))},[]);const x=async m=>{let u=m,o=f?await j.edit(i._id,u):await j.add(u);if(o.code)return q.error(o.msg);q.success(o.msg),a.goBack()};return e.createElement(C,{className:"gx-card",title:t.formatMessage({id:"visitor.form"},{control:f?"Edit":"Create"})},e.createElement(d,g(p({form:v},_),{name:"visitor",onFinish:x,autoComplete:"off"}),e.createElement(s,{label:t.formatMessage({id:"visitor.companyName"}),name:"companyName",rules:[{required:!0}]},e.createElement(l,null)),e.createElement(s,{label:t.formatMessage({id:"visitor.fullName"}),name:"fullName",rules:[{required:!0}]},e.createElement(l,null)),e.createElement(s,{label:t.formatMessage({id:"visitor.admissionNoticeEmail"}),name:"admissionNoticeEmail",rules:[{required:!0}]},e.createElement(l,{type:"email"})),e.createElement(s,{label:t.formatMessage({id:"visitor.contactPerson"}),name:"contactPerson",rules:[{required:!0}]},e.createElement(l,null)),e.createElement(s,{label:t.formatMessage({id:"visitor.contactingDepartment"}),name:"contactingDepartmentId",rules:[{required:!0}]},e.createElement(K,{options:n})),e.createElement(s,{label:t.formatMessage({id:"visitor.visitDate"}),name:"visitDate",rules:[{required:!0}]},e.createElement(L,{format:"YYYY-MM-DD"})),e.createElement(s,{label:t.formatMessage({id:"visitor.timeEst"}),name:"timeEst",rules:[{required:!0}]},e.createElement(T.RangePicker,{placeholder:[t.formatMessage({id:"visitor.arrvialTime"}),t.formatMessage({id:"visitor.departureTime"})]})),e.createElement(Y,{orientation:"left"},t.formatMessage({id:"visitor.carPlateNos"})),e.createElement(d.List,{name:"carPlateNos",initialValue:[{licenceNumber:"",email:""}]},(m,{add:u,remove:o})=>e.createElement(C,null,Q(m,u,o))),e.createElement(s,p({},z),e.createElement(y,{type:"primary",htmlType:"submit"},t.formatMessage({id:"buttons.submit"})))))};function Q(r,a,t,i){return e.createElement(N,{key:i},r.map((n,E)=>e.createElement(c,{span:10,style:H,key:n.key},e.createElement(N,null,e.createElement(c,{span:w.span},e.createElement(s,{name:[n.name,"licenceNumber"],fieldKey:[n.fieldKey,"licenceNumber"],wrapperCol:h,rules:[{required:!0,message:"Please input number's."}]},e.createElement(l,{placeholder:"licence number"}))),e.createElement(c,{span:w.span},e.createElement(s,{name:[n.name,"email"],fieldKey:[n.fieldKey,"email"],wrapperCol:h,rules:[{required:!0,message:"Please input email's."}]},e.createElement(l,{placeholder:"email",type:"email"}))),E===0?null:e.createElement(c,{span:4},e.createElement(y,{danger:!0,type:"text",onClick:()=>t(n.name)},e.createElement(V,null)))))),e.createElement(c,{span:2},e.createElement(y,{block:!0,icon:e.createElement(A,null),onClick:()=>a()})))}var ae=S(J);export{ae as default};
//# sourceMappingURL=modify.2c8f7941.js.map
