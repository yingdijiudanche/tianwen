{"version":3,"file":"modify.49b02515.js","sources":["../../src/routes/menu/modify.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { message, Form, Input, Button, Select, Card, Switch } from 'antd';\r\nimport { injectIntl } from \"react-intl\";\r\n\r\nimport api from '../../api/menu';\r\n\r\nconst Item = Form.Item;\r\nconst layout = {\r\n  labelCol: { span: 4 },\r\n  wrapperCol: { span: 12 },\r\n};\r\nconst tailLayout = {\r\n  wrapperCol: { span: 8, offset: 4 },\r\n};\r\n\r\nconst Modify = ({ location, history, intl }) => {\r\n  const { editData } = location.state || {};\r\n\r\n  const isEdit = editData !== undefined;\r\n  const [form] = Form.useForm();\r\n  const [menus, setMenus] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const initMenus = async () => {\r\n      let res = await api.options();\r\n      if (res.code) return message.error(res.msg);\r\n      setMenus(res.data);\r\n    };\r\n    initMenus();\r\n    if (isEdit) {\r\n      form.setFieldsValue(editData);\r\n    }\r\n    //eslint-disable-next-line\r\n  }, []);\r\n\r\n  const onFinish = async values => {\r\n    if (!values.hidden) values.hidden = false;\r\n    let res = isEdit ? await api.edit(editData._id, values) : await api.add(values);\r\n    if (res.code) return message.error(res.msg);\r\n    message.success(res.msg);\r\n    history.goBack();\r\n  };\r\n\r\n  return <Card className=\"gx-card\" title={intl.formatMessage({ id: 'menu.form' }, { control: isEdit ? \"Edit\" : \"Create\" })}>\r\n    <Form {...layout} form={form} name='menu' onFinish={onFinish} autoComplete=\"off\">\r\n      <Item label={intl.formatMessage({ id: 'menu.pid' })} name='pid'>\r\n        <Select placeholder={intl.formatMessage({ id: 'placeholder.selector' })} options={menus}>\r\n        </Select>\r\n      </Item>\r\n      <Item label={intl.formatMessage({ id: 'menu.name' })} name='name' rules={[{ required: true }]}>\r\n        <Input />\r\n      </Item>\r\n      <Item label={intl.formatMessage({ id: 'menu.path' })} name='path' rules={[{ required: true }]}>\r\n        <Input />\r\n      </Item>\r\n      <Item label={intl.formatMessage({ id: 'menu.icon' })} name='icon'>\r\n        <Input />\r\n      </Item>\r\n      <Item label={intl.formatMessage({ id: 'menu.sort' })} name='sort' rules={[{ required: true }]}>\r\n        <Input type=\"number\" />\r\n      </Item>\r\n      <Item label={intl.formatMessage({ id: 'menu.component' })} name='component'>\r\n        <Input />\r\n      </Item>\r\n      <Item label={intl.formatMessage({ id: 'menu.hidden' })} name='hidden' valuePropName=\"checked\">\r\n        <Switch />\r\n      </Item>\r\n\r\n      <Item {...tailLayout}>\r\n        <Button type=\"primary\" htmlType=\"submit\">\r\n          {intl.formatMessage({ id: 'buttons.submit' })}\r\n        </Button>\r\n      </Item>\r\n    </Form>\r\n  </Card>\r\n}\r\n\r\nexport default injectIntl(Modify);"],"names":["Item","Form","layout","labelCol","span","wrapperCol","tailLayout","offset","Modify","location","history","intl","editData","state","isEdit","undefined","form","useForm","menus","setMenus","useState","res","api","options","code","message","error","msg","data","setFieldsValue","onFinish","values","hidden","edit","_id","add","success","goBack","formatMessage","id","control","required","injectIntl"],"mappings":"2nBAMA,KAAMA,GAAOC,EAAKD,KACZE,EAAS,CACbC,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,KAEhBE,EAAa,CACjBD,WAAY,CAAED,KAAM,EAAGG,OAAQ,IAG3BC,EAAS,CAAC,CAAEC,WAAUC,UAASC,UAAW,MACxC,CAAEC,YAAaH,EAASI,OAAS,GAEjCC,EAASF,IAAaG,OACtB,CAACC,GAAQf,EAAKgB,UACd,CAACC,EAAOC,GAAYC,mBAAS,wBAEzB,IAAM,CACI,UAAY,IACxBC,GAAM,KAAMC,GAAIC,aAChBF,EAAIG,WAAaC,GAAQC,MAAML,EAAIM,OAC9BN,EAAIO,UAGXd,KACGe,eAAejB,IAGrB,SAEGkB,GAAW,KAAMC,IAAU,CAC1BA,EAAOC,WAAeA,OAAS,OAChCX,GAAMP,EAAS,KAAMQ,GAAIW,KAAKrB,EAASsB,IAAKH,GAAU,KAAMT,GAAIa,IAAIJ,MACpEV,EAAIG,WAAaC,GAAQC,MAAML,EAAIM,OAC/BS,QAAQf,EAAIM,OACZU,iCAGF,EAAD,CAAM,UAAU,UAAU,MAAO1B,EAAK2B,cAAc,CAAEC,GAAI,aAAe,CAAEC,QAAS1B,EAAS,OAAS,4BAC1G,EAAD,OAAUZ,GAAV,CAAkB,OAAY,KAAK,OAAO,WAAoB,aAAa,wBACxE,EAAD,CAAM,MAAOS,EAAK2B,cAAc,CAAEC,GAAI,aAAe,KAAK,uBACvD,EAAD,CAAQ,YAAa5B,EAAK2B,cAAc,CAAEC,GAAI,yBAA2B,QAASrB,qBAGnF,EAAD,CAAM,MAAOP,EAAK2B,cAAc,CAAEC,GAAI,cAAgB,KAAK,OAAO,MAAO,CAAC,CAAEE,SAAU,sBACnF,EAAD,uBAED,EAAD,CAAM,MAAO9B,EAAK2B,cAAc,CAAEC,GAAI,cAAgB,KAAK,OAAO,MAAO,CAAC,CAAEE,SAAU,sBACnF,EAAD,uBAED,EAAD,CAAM,MAAO9B,EAAK2B,cAAc,CAAEC,GAAI,cAAgB,KAAK,wBACxD,EAAD,uBAED,EAAD,CAAM,MAAO5B,EAAK2B,cAAc,CAAEC,GAAI,cAAgB,KAAK,OAAO,MAAO,CAAC,CAAEE,SAAU,sBACnF,EAAD,CAAO,KAAK,4BAEb,EAAD,CAAM,MAAO9B,EAAK2B,cAAc,CAAEC,GAAI,mBAAqB,KAAK,6BAC7D,EAAD,uBAED,EAAD,CAAM,MAAO5B,EAAK2B,cAAc,CAAEC,GAAI,gBAAkB,KAAK,SAAS,cAAc,2BACjF,EAAD,uBAGD,EAAD,KAAUjC,mBACP,EAAD,CAAQ,KAAK,UAAU,SAAS,UAC7BK,EAAK2B,cAAc,CAAEC,GAAI,wBAOpC,MAAeG,EAAWlC"}