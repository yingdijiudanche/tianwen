var N=Object.defineProperty,O=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var C=(r,t,a)=>t in r?N(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,c=(r,t)=>{for(var a in t||(t={}))G.call(t,a)&&C(r,a,t[a]);if(y)for(var a of y(t))L.call(t,a)&&C(r,a,t[a]);return r},v=(r,t)=>O(r,S(t));import{F as d,r as g,R as e,G as D,I as u,aw as M,m as x,ax as B,ay as H,au as j,av as p,B as b,N as T,o as k}from"./antd.6184fff2.js";import{a as I}from"./dayjs.min.39f03de2.js";import{a as A}from"./index.7faa062c.js";import{a as R}from"./index.eb59bbaa.js";import{a as K}from"./index.e4fa613d.js";import{M as Y}from"./MinusCircleOutlined.ff3ec7ec.js";import"./request.afec6a83.js";const l=d.Item,_={labelCol:{span:4},wrapperCol:{span:12}},z={wrapperCol:{span:8,offset:4}},J={marginRight:"4%"},w={span:20},Q=({location:r,history:t,intl:a})=>{const{editData:n}=r.state||{},[m,f]=g.exports.useState([]),[q,h]=g.exports.useState(!1),o=n!==void 0,[E]=d.useForm();g.exports.useEffect(()=>{if(o){const s=v(c({},n),{authDate:I(n.authDate),leaveRecord:n.leaveRecord&&n.leaveRecord.map(i=>({leaveDate:I(i.leaveDate)}))});E.setFieldsValue(s)}K.getDriverOptions(o?n.adminId:"n").then(s=>f(s))},[]);const P=s=>{s!==1&&s!==2?(h(!0),E.setFieldsValue({class:!1})):h(!1)},V=async s=>{let i=o?await R.edit(n._id,s):await R.add(s);if(i.code)return k.error(i.msg);k.success(i.msg),t.goBack()};return e.createElement(D,{className:"gx-card",title:a.formatMessage({id:"driver.form"},{control:o?"Edit":"Create"})},e.createElement(d,v(c({},_),{form:E,name:"driver",onFinish:V,autoComplete:"off"}),e.createElement(l,{label:a.formatMessage({id:"driver.nameEN"}),name:"nameEN",rules:[{required:!0}]},e.createElement(u,null)),e.createElement(l,{label:a.formatMessage({id:"driver.nameCH"}),name:"nameCH",rules:[{required:!0}]},e.createElement(u,null)),e.createElement(l,{label:a.formatMessage({id:"driver.email"}),name:"email",rules:[{required:!0}]},e.createElement(u,{type:"email"})),e.createElement(l,{label:a.formatMessage({id:"driver.staffID"}),name:"staffID"},e.createElement(u,null)),e.createElement(l,{label:a.formatMessage({id:"driver.authDate"}),name:"authDate",rules:[{required:!0}]},e.createElement(M,null)),e.createElement(l,{label:a.formatMessage({id:"driver.type"}),name:"type",rules:[{required:!0}]},e.createElement(x,{options:[{label:"Private Car",value:1},{label:"Light Goods Vehicle (Permitted gross vehicle weight not exceeding 5.5 tonnes)",value:2},{label:"Medium Goods Vehicle",value:18},{label:"Heavy Goods Vehicle",value:19},{label:"Special Purpose Vehicle",value:21}],onChange:P})),e.createElement(l,{label:a.formatMessage({id:"driver.admin"}),name:"adminId",rules:[{required:!0}]},e.createElement(x,{options:m})),e.createElement(l,{label:a.formatMessage({id:"driver.automaticTransmission"}),name:"class",valuePropName:"checked",initialValue:!1},e.createElement(B,{checkedChildren:"Yes",unCheckedChildren:"No",disabled:q})),e.createElement(H,{orientation:"left"},a.formatMessage({id:"driver.leaveRecord"})),e.createElement(d.List,{name:"leaveRecord"},(s,{add:i,remove:F})=>e.createElement(D,null,U(s,i,F))),e.createElement(l,c({},z),e.createElement(b,{type:"primary",htmlType:"submit"},a.formatMessage({id:"buttons.submit"})))))};function U(r,t,a,n){return e.createElement(j,{key:n},r.map((m,f)=>e.createElement(p,{span:4,style:J,key:m.key},e.createElement(j,null,e.createElement(p,{span:w.span},e.createElement(l,{name:[m.name,"leaveDate"],fieldKey:[m.fieldKey,"leaveDate"],wrapperCol:w,rules:[{required:!0,message:"Please input leave's."}]},e.createElement(M,null))),f===0?null:e.createElement(p,{span:3},e.createElement(b,{danger:!0,type:"text",onClick:()=>a(m.name)},e.createElement(Y,null)))))),e.createElement(p,{span:2},e.createElement(b,{block:!0,icon:e.createElement(T,null),onClick:()=>t()})))}var se=A(Q);export{se as default};
//# sourceMappingURL=modify.423c8e82.js.map
