var h=Object.defineProperty,C=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var g=(t,r,e)=>r in t?h(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,c=(t,r)=>{for(var e in r||(r={}))P.call(r,e)&&g(t,e,r[e]);if(E)for(var e of E(r))R.call(r,e)&&g(t,e,r[e]);return t},w=(t,r)=>C(t,q(r));import{F as i,r as b,R as a,E as x,m as N,I as m,B as k,o as u}from"./antd.fa9dc31e.js";import{i as B}from"./index.49e89548.js";import{a as M}from"./index.af94bf43.js";import{a as j}from"./index.4cbe69e4.js";import"./request.6e8ef974.js";const o=i.Item,v={labelCol:{span:4},wrapperCol:{span:12}},S={wrapperCol:{span:8,offset:4}},_=({location:t,history:r,intl:e})=>{const{editData:d}=t.state||{},l=d!==void 0,[f]=i.useForm(),[y,F]=b.exports.useState([]);b.exports.useEffect(()=>{(async()=>{let s=await j.getOptions();if(s.code)return u.error(s.msg);F(s.data)})(),l&&f.setFieldsValue(d)},[]);const I=async n=>{let s=l?await M.edit(d._id,n):await M.add(n);if(s.code)return u.error(s.msg);u.success(s.msg),r.goBack()};return a.createElement(x,{className:"gx-card",title:e.formatMessage({id:"admin.form"},{control:l?"Edit":"Create"})},a.createElement(i,w(c({},v),{form:f,name:"admin",onFinish:I,autoComplete:"off"}),a.createElement(o,{label:e.formatMessage({id:"admin.roleName"}),name:"roleId",rules:[{required:!0}]},a.createElement(N,{placeholder:e.formatMessage({id:"placeholder.selector"}),options:y})),a.createElement(o,{label:e.formatMessage({id:"admin.account"}),name:"account",rules:[{required:!0}]},a.createElement(m,null)),l?a.createElement(o,{label:e.formatMessage({id:"admin.password"}),name:"password"},a.createElement(m,null)):a.createElement(a.Fragment,null,a.createElement(o,{label:e.formatMessage({id:"admin.password"}),name:"password",rules:[{required:!0}],hasFeedback:!0},a.createElement(m.Password,null)),a.createElement(i.Item,{name:"confirm",label:e.formatMessage({id:"admin.confirmPassword"}),dependencies:["password"],hasFeedback:!0,rules:[{required:!0},({getFieldValue:n})=>({validator(s,p){return!p||n("password")===p?Promise.resolve():Promise.reject(new Error(e.formatMessage({id:"admin.confirmError"})))}})]},a.createElement(m.Password,null))),a.createElement(o,{label:e.formatMessage({id:"admin.name"}),name:"name",rules:[{required:!0}]},a.createElement(m,null)),a.createElement(o,{label:e.formatMessage({id:"admin.email"}),name:"email"},a.createElement(m,null)),a.createElement(o,{label:e.formatMessage({id:"admin.staffNo"}),name:"staffNo"},a.createElement(m,null)),a.createElement(o,c({},S),a.createElement(k,{type:"primary",htmlType:"submit"},e.formatMessage({id:"buttons.submit"})))))};var z=B(_);export{z as default};
//# sourceMappingURL=modify.8d7258f0.js.map
